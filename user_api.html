<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>AMPcrowd by amplab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name"><a class="nostyle" href="index.html">AMPcrowd</a></h1>
      <h2 class="project-tagline">A RESTful web service that runs microtasks across multiple crowds, provides quality control techniques, and is easily extensible.</h2>
      <a href="https://github.com/amplab/ampcrowd" class="btn">View on GitHub</a>
      <a href="https://github.com/amplab/ampcrowd/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/amplab/ampcrowd/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
<h1>
<a id="web-service-user-facing-apis" class="anchor" href="#web-service-user-facing-apis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Web Service User-Facing APIs</h1>

<ul>
<li>
<p>Create tasks for a group of points.</p>

<ul>
<li>
<p>URL :</p>

<p><strong>POST /crowds/CROWD_NAME/tasks/</strong></p>
</li>
<li>Available Crowds: see below.</li>
<li>
<p>Data : There is only one single field, 'data', which maps to a json dictionary with keys:</p>

<ul>
<li>
<strong>configuration</strong> : settings for this group of points, a json dictionary with keys:

<ul>
<li>
<strong>task_type</strong> : The type of this task, e.g, 'sa' for sentiment analysis, 'er' for entity resolution, 
'ft' for filtering tasks.</li>
<li>
<strong>task_batch_size</strong> : The maximum number of points to show a crowd worker in a single task (integer).</li>
<li>
<strong>num_assignments</strong>: The maximum number of crowd votes to acquire for each task.</li>
<li>
<strong>callback_url</strong>: The URL to POST results to (see below).</li>
<li>
<strong>CROWD_NAME</strong>: A json dictionary with configuration specific to the crowd running the tasks. See 
below for the settings for specific crowds.</li>
</ul>
</li>
<li>
<strong>group_id</strong>: A unique identifier for this group of points.</li>
<li>
<p><strong>group_context</strong>: A json dictionary that represents the context that is shared among all the points in the group. Each type of task has an <strong>optional</strong> field 'instruction' which let users pass in custom HTML-based instructions. For each specific task :</p>

<ol>
<li>
<p>'sa'(Sentiment Analysis). The group_context is a json dictionary which is empty or only consists of custom instructions, e.g, </p>

<div class="highlight highlight-json"><pre>{<span class="pl-s"><span class="pl-pds">"</span>instruction<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>&lt;p&gt;For each tweet, decide whether it is positive, negative, or neutral&lt;/p&gt;<span class="pl-pds">"</span></span>}</pre></div>
</li>
<li>
<p>'er'(Entity Resolution). In addition to custome instructions, the group_context consists of the shared schema for each pair of record . 
For example, the following:</p>

<div class="highlight highlight-json"><pre>{
   <span class="pl-s"><span class="pl-pds">"</span>instruction<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>Decide whether two records in each group refer to the &lt;b&gt;same entity&lt;/b&gt;.<span class="pl-pds">"</span></span>,
   <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span>:[<span class="pl-s"><span class="pl-pds">"</span>price<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>location<span class="pl-pds">"</span></span>]
}</pre></div>
</li>
<li>
<p>'ft'(Filtering). In addition to the custom instructions, the group_context consists of the shared schema of the records in each question. 
It is similar to the group_context of an entity resolution task. For example :</p>

<div class="highlight highlight-json"><pre>{
   <span class="pl-s"><span class="pl-pds">"</span>instruction<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>&lt;p&gt;Answer the question in each group.&lt;/p&gt;<span class="pl-pds">"</span></span>,
   <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span>:[<span class="pl-s"><span class="pl-pds">"</span>Conference<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>First Author<span class="pl-pds">"</span></span>]
}</pre></div>
</li>
</ol>
</li>
<li>
<p><strong>content</strong> : Data necessary to render the crowd interface for the selected task type. Available types are:</p>

<ol>
<li>
<p>'sa' (Sentiment Analysis). Content should be a json dictionary mapping unique ids to tweet strings, 
e.g, the following:</p>

<div class="highlight highlight-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>tweet1<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Arsenal won the 4th again!<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>tweet2<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Theo Walcott broke the ligament in his knee last season.<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>tweet3<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Lebron James went back to Cavaliers after he found his teammates in Heats no longer powerful.<span class="pl-pds">"</span></span>
}</pre></div>
</li>
<li>
<p>'er' (Entity Resolution). Content should consist of pairs of records for entity resolution, specified as
a json dictionary with pairs of records mapped to unique ids, e.g, the following:</p>

<div class="highlight highlight-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>pair1<span class="pl-pds">"</span></span>: [[<span class="pl-s"><span class="pl-pds">"</span>5<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>LA<span class="pl-pds">"</span></span>], [<span class="pl-s"><span class="pl-pds">"</span>6<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Berkeley<span class="pl-pds">"</span></span>]],
    <span class="pl-s"><span class="pl-pds">"</span>pair2<span class="pl-pds">"</span></span>: [[<span class="pl-s"><span class="pl-pds">"</span>80<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>London<span class="pl-pds">"</span></span>], [<span class="pl-s"><span class="pl-pds">"</span>80.0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Londyn<span class="pl-pds">"</span></span>]]
}</pre></div>
</li>
<li>
<p>'ft'(Filtering). The content for each point should be a json dictionary consisting of a title and the values
for each attribute, e.g, the following:</p>

<div class="highlight highlight-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>ft1<span class="pl-pds">"</span></span>: {<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>Is this a paper of Michael Franklin?<span class="pl-pds">"</span></span>, 
            <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span> : [<span class="pl-s"><span class="pl-pds">"</span>icde<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Michael Franklin<span class="pl-pds">"</span></span>]}
}</pre></div>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Examples :</p>

<div class="highlight highlight-json"><pre>  data=
  {
      <span class="pl-s"><span class="pl-pds">"</span>configuration<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>task_type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>sa<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>task_batch_size<span class="pl-pds">"</span></span>: <span class="pl-c1">2</span>,
          <span class="pl-s"><span class="pl-pds">"</span>num_assignments<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
          <span class="pl-s"><span class="pl-pds">"</span>callback_url<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>google.com<span class="pl-pds">"</span></span>
      },
      <span class="pl-s"><span class="pl-pds">"</span>group_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Dan1<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>group_context<span class="pl-pds">"</span></span>: {},
      <span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>tweet1<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>aa<span class="pl-pds">"</span></span>, 
          <span class="pl-s"><span class="pl-pds">"</span>tweet2<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>bb<span class="pl-pds">"</span></span>
      }
   }

  data=
  {
      <span class="pl-s"><span class="pl-pds">"</span>configuration<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>task_type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>er<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>task_batch_size<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
          <span class="pl-s"><span class="pl-pds">"</span>num_assignments<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
          <span class="pl-s"><span class="pl-pds">"</span>callback_url<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>google.com<span class="pl-pds">"</span></span>
      },
      <span class="pl-s"><span class="pl-pds">"</span>group_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>haha<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>group_context<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span>: [<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>]
      },
      <span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>pair1<span class="pl-pds">"</span></span>: [[<span class="pl-s"><span class="pl-pds">"</span>22<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>James<span class="pl-pds">"</span></span>],[<span class="pl-s"><span class="pl-pds">"</span>21<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Wenbo<span class="pl-pds">"</span></span>]]
      }
   }

  data=
  {
      <span class="pl-s"><span class="pl-pds">"</span>configuration<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>task_type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>ft<span class="pl-pds">"</span></span>,
          <span class="pl-s"><span class="pl-pds">"</span>task_batch_size<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
          <span class="pl-s"><span class="pl-pds">"</span>num_assignments<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
          <span class="pl-s"><span class="pl-pds">"</span>callback_url<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>google.com<span class="pl-pds">"</span></span>
      },
      <span class="pl-s"><span class="pl-pds">"</span>group_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>haha<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>group_context<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>fields<span class="pl-pds">"</span></span>: [<span class="pl-s"><span class="pl-pds">"</span>Conference<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>First Author<span class="pl-pds">"</span></span>]
      },
      <span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>: {
          <span class="pl-s"><span class="pl-pds">"</span>ft1<span class="pl-pds">"</span></span>: {
              <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Decide whether it is one of Michael Franklin's Paper.<span class="pl-pds">"</span></span>,
              <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span>: [<span class="pl-s"><span class="pl-pds">"</span>icde<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Michael Franklin<span class="pl-pds">"</span></span>]
          },
          <span class="pl-s"><span class="pl-pds">"</span>ft2<span class="pl-pds">"</span></span>: {
              <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Decide whether it is one of Jiannan Wang's Paper.<span class="pl-pds">"</span></span>, 
              <span class="pl-s"><span class="pl-pds">"</span>record<span class="pl-pds">"</span></span> : [<span class="pl-s"><span class="pl-pds">"</span>nsdi<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Zhao Zhang<span class="pl-pds">"</span></span>]
          }
      }
  }</pre></div>
</li>
<li>
<p>The direct response for this request is a simple json dictionary, one of the following:</p>

<div class="highlight highlight-json"><pre>  {<span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>ok<span class="pl-pds">"</span></span>}
  {<span class="pl-s"><span class="pl-pds">"</span>status<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>wrong<span class="pl-pds">"</span></span>}</pre></div>

<p>The latter means that the format is incorrect, it may be attributed to the wrong format of the content field
or omissions of other important fields.</p>
</li>
</ul>
</li>
<li>
<p>Send the results to the callback URL (<strong>POST</strong> method):</p>

<p>When a point gets enough votes from the crowd, the EM/MV answer will be sent back to the call back url.</p>

<ul>
<li>
<p>The results that are sent back consist of a single field, 'data', which maps to a json dictionary :</p>

<ul>
<li>
<strong>group_id</strong> : a string specifying the group that this point belongs to</li>
<li>
<strong>answers</strong>: a list of 1 or more responses for points in the group, each of which contains:

<ul>
<li>
<strong>identifier</strong> : the identifier of the point given when the group was created.</li>
<li>
<strong>value</strong> : the answer value. Values should depend on the type of the crowd task. Available types are:

<ul>
<li>'sa': Value should be an integer in [1,5] corresponding to:

<ul>
<li>
<strong>1</strong>: Tweet is very negative</li>
<li>
<strong>2</strong>: Tweet is somewhat negative</li>
<li>
<strong>3</strong>: Tweet is neutral</li>
<li>
<strong>4</strong>: Tweet is somewhat positive</li>
<li>
<strong>5</strong>: Tweet is very positive</li>
</ul>
</li>
<li>'er': Value should be either 0.0 or 1.0, indicating 'records do not match' or 'records match', respectively.</li>
<li>'ft': Value should be either 0.0 or 1.0, indicating 'the answer to the question is NO' or 'the answer to the
question is YES' respectively.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Examples:</p>

<div class="highlight highlight-json"><pre>  data=
  {
      <span class="pl-s"><span class="pl-pds">"</span>group_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Dan1<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>answers<span class="pl-pds">"</span></span>: [
          {
              <span class="pl-s"><span class="pl-pds">"</span>identifier<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>tweet1<span class="pl-pds">"</span></span>,
              <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>
          },
          {
              <span class="pl-s"><span class="pl-pds">"</span>identifier<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>tweet2<span class="pl-pds">"</span></span>,
              <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">3</span>
          }
      ]
  }

  data=
  {
      <span class="pl-s"><span class="pl-pds">"</span>group_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>haha<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>answers<span class="pl-pds">"</span></span>: [
          {
              <span class="pl-s"><span class="pl-pds">"</span>identifier<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>pair1<span class="pl-pds">"</span></span>,
              <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">0.0</span>
          }
      ]
  }</pre></div>
</li>
</ul>
</li>
<li>
<p>Delete all the tasks that are stored in the database for a given crowd:</p>

<ul>
<li>URL :
<strong>GET /crowds/CROWD_NAME/purge_tasks/</strong>
</li>
</ul>
</li>
</ul>


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/amplab/ampcrowd">AMPcrowd</a> is maintained by <a href="https://github.com/amplab">amplab</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>


  </body>
</html>

